{% extends 'layouts/base.html' %}

{% block title %} Dashboard {% endblock title %}

<!-- Specific CSS goes HERE -->
{% block stylesheets %}{% endblock stylesheets %}

{% block content %}

    <!-- Header -->
    <div class="header bg-gradient-primary pb-8 pt-5 pt-md-8">
      <div class="container-fluid">
        <div class="header-body">
          <!-- Card stats -->
          <div class="row">
            <div class="col-xl-3 col-lg-6">
              <div class="card card-stats mb-4 mb-xl-0">
                <div class="card-body">
                  <div class="row">
                    <div class="col">
                      <h5 class="card-title text-uppercase text-muted mb-0">Total <br> Farmer</h5>
                      <span class="h2 font-weight-bold mb-0">{{ total_user }}</span>
                    </div>
                    <div class="col-auto">
                      <div class="icon icon-shape bg-danger text-white rounded-circle shadow">
                        <i class="fas fa-users"></i>
                      </div>
                    </div>
                  </div>
                  <!-- <p class="mt-3 mb-0 text-muted text-sm">
                    <span class="text-success mr-2"><i class="fa fa-arrow-up"></i> 3.48%</span>
                    <span class="text-nowrap">Since last month</span>
                  </p> -->
                </div>
              </div>
            </div>
            <div class="col-xl-3 col-lg-6">
              <div class="card card-stats mb-4 mb-xl-0">
                <div class="card-body">
                  <div class="row">
                    <div class="col">
                      <h5 class="card-title text-uppercase text-muted mb-0">Total <br> Quantities</h5>
                      <span class="h2 font-weight-bold mb-0">{{ all_weight }} MAN <br></span>
                    </div>
                    <div class="col-auto">
                      <div class="icon icon-shape bg-warning text-white rounded-circle shadow">
                        <i class="fas fa-users"></i>
                      </div>
                    </div>
                  </div>
                    
                  <!-- <p class="mt-3 mb-0 text-muted text-sm">
                    {% if find_per_green %}
                      <span class="text-green mr-2"><i class="fas fa-arrow-up"></i>{{ find_per_green }}%</span>
                      {% else %}
                      <span class="text-danger mr-2"><i class="fas fa-arrow-down"></i>{{ find_per_red }}%</span>
                    {% endif %}
                    
                    <span class="text-nowrap">Since last week</span>
                  </p> -->
                </div>
              </div>
            </div>
            <div class="col-xl-3 col-lg-6">
              <div class="card card-stats mb-4 mb-xl-0">
                <div class="card-body">
                  <div class="row">
                    <div class="col">
                      <h5 class="card-title text-uppercase text-muted mb-0">Total <br>Available Quantities</h5>
                      <span class="h2 font-weight-bold mb-0">{{ available_weight }} MAN</span>
                    </div>
                    <div class="col-auto">
                      <div class="icon icon-shape bg-yellow text-white rounded-circle shadow">
                        <i class="fas fa-percentage"></i>
                      </div>
                    </div>
                  </div>
                  <!-- <p class="mt-3 mb-0 text-muted text-sm">
                    <span class="text-warning mr-2"><i class="fas fa-arrow-down"></i> 1.10%</span>
                    <span class="text-nowrap">Since yesterday</span>
                  </p> -->
                </div>
              </div>
            </div>
            <div class="col-xl-3 col-lg-6">
              <div class="card card-stats mb-4 mb-xl-0">
                <div class="card-body">
                  <div class="row">
                    <div class="col">
                      <h5 class="card-title text-uppercase text-muted mb-0">Total Sell Quantities</h5>
                      <span class="h2 font-weight-bold mb-0">{{ total_sell }} MAN</span>
                    </div>
                    <div class="col-auto">
                      <div class="icon icon-shape bg-info text-white rounded-circle shadow">
                        <i class="fas fa-percent"></i>
                      </div>
                    </div>
                  </div>

                
                  <!-- <p class="mt-3 mb-0 text-muted text-sm">
                    <span class="text-success mr-2"><i class="fas fa-arrow-up"></i> 12%</span>
                    <span class="text-nowrap">Since last month</span>
                  </p> -->
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <div class="container-fluid mt--7">
      <div class="row">
        <div class="col-xl-12">
          <div class="card shadow">
            <div class="card-header bg-transparent">
              <div class="row align-items-center">
                <div class="col">
                  <h6 class="text-uppercase text-muted ls-1 mb-1"></h6>
                  <h2 class="mb-0">Data Visulization</h2>
                </div>
              </div>
            </div>
            <div class="card-body">
              <!-- Chart -->
              <div class="chart"> 
                <canvas id="bar1-chart" height="100" class="chart-canvas"></canvas>
              </div>
            </div>
          </div>
        </div>
      </div>
      <br>


      

      
      {% include "includes/footer.html" %}

    </div>

{% endblock content %}

<!-- Specific JS goes HERE --> 
{% block javascripts %}
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js" integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>
  <script>
    var config = {
      //{#horizontalBar#}
      type: 'pie',
      data: {
          datasets: [{
              data: [{{ total_user|safe }}, {{ new_user|safe }}],
              backgroundColor: [
                  'rgba(255, 99, 132, 0.5)',
                  'rgba(54, 162, 235, 0.5)',
                  'rgba(255, 206, 86, 0.5)',
                  'rgba(75, 192, 192, 0.5)',
              ],
              borderColor: [
                  'rgba(255,99,132,1)',
                  'rgba(54, 162, 235, 1)',
                  'rgba(255, 206, 86, 1)',
                  'rgba(75, 192, 192, 1)',
              ],
              borderWidth: 0.4,
              label: 'Total Farmer'
          }],


          labels: [
              'Total Farmer',
              'New Farmer'
          ]
      },
      options: {
          scales: {
              //{# xAxes:[{ #}
              //{#    barPercentage: 0.4,#}
              //{#    ticks:{#}
              //{#       beginAtZero: true,#}
              //{#    },#}
              //{#    gridLines:{#}
              //{#        display: false#}
              //{#    }#}
              //{# }]#}
          },
          responsive: true,
          legend: {
              position: 'top',
          },
          title: {
              display: true,
              //text: 'Month New Registration'
          }
      }
  };  
  let start = new Date();

  var config1 = {
    {#horizontalBar#}
    type: 'bar',
    data: {
        datasets: [{
            data: [{{ first_last_day|safe }}, {{ second_last_day|safe }}, {{ third_last_day }}, {{ four_last_day }}, {{ five_last_day }}, {{ six_last_day }}, {{ seven_last_day }}],
            backgroundColor: [
                'rgba(255, 99, 132, 0.5)',
                'rgba(54, 162, 235, 0.5)',
                'rgba(255, 206, 86, 0.5)',
                'rgba(75, 192, 192, 0.5)',
                'rgba(153, 102, 255, 0.2)',
                'rgba(255, 159, 64, 0.2)'
            ],
            borderColor: [
                'rgba(255,99,132,1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192, 1)',
                'rgba(153, 102, 255, 1)',
                'rgba(255, 159, 64, 1)'
            ],
            {#label: 'Mask',#}
        }],


        labels: [
            'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'

        ]
    },
    options: {
        scales: {
            xAxes: [{
                barPercentage: 0.4,
                ticks: {
                    beginAtZero: true,
                },
                gridLines: {
                    display: false
                },
                scaleLabel:{
                  display:true,
                  labelString: 'days'
                }
            }],
            yAxes: [{
              scaleLabel: {
                display: true,
                labelString: 'Number'
              },
              barPercentage: 0.4,
              ticks: {
                beginAtZero: true,
              }
            }]
        },
        responsive: true,
        legend: {
            position: 'top',
            display: false // Lable hide krva
        },
        title: {
            display: true,
            text: 'Last 7 Days'
        }
    }
};


var config2 = {
  {#horizontalBar#}
  type: 'bar',
  data: {
      datasets: [{
          data: [{{ month.jan|safe }}, {{ month.feb|safe }}, {{ month.march }}, {{ month.april }}, {{ month.may }}, {{ month.jun }}, {{ month.july }}, {{ month.aug }}, {{ month.sep }},
                {{ month.oct }}, {{ month.nov }}, {{ month.dec }}
          ],
          backgroundColor: [
              'rgba(255, 99, 132, 0.5)',
              'rgba(54, 162, 235, 0.5)',
              'rgba(255, 206, 86, 0.5)',
              'rgba(75, 192, 192, 0.5)',
              'rgba(153, 102, 255, 0.2)',
              'rgba(255, 159, 64, 0.2)',
              'rgba(255, 99, 132, 0.5)',
              'rgba(54, 162, 235, 0.5)',
              'rgba(255, 206, 86, 0.5)',
              'rgba(75, 192, 192, 0.5)',
              'rgba(153, 102, 255, 0.2)',
              'rgba(255, 159, 64, 0.2)',
          ],
          borderColor: [
              'rgba(255,99,132,1)',
              'rgba(54, 162, 235, 1)',
              'rgba(255, 206, 86, 1)',
              'rgba(75, 192, 192, 1)',
              'rgba(153, 102, 255, 1)',
              'rgba(255, 159, 64, 1)',
              'rgba(255,99,132,1)',
              'rgba(54, 162, 235, 1)',
              'rgba(255, 206, 86, 1)',
              'rgba(75, 192, 192, 1)',
              'rgba(153, 102, 255, 1)',
              'rgba(255, 159, 64, 1)',
          ],
          {#label: 'Mask',#}
      }],


      labels: [
          'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'

      ]
  },
  options: {
      scales: {
          xAxes: [{
              barPercentage: 0.4,
              ticks: {
                  beginAtZero: true,
              },
              gridLines: {
                  display: false
              },
              scaleLabel:{
                display:true,
                labelString: 'Month'
              }
          }],
          yAxes: [{
            scaleLabel: {
              display: true,
              labelString: 'Number of registration'
            },
            barPercentage: 0.4,
            ticks: {
              beginAtZero: true,
            }
          }]
      },
      responsive: true,
      legend: {
          position: 'top',
          display: false // Lable hide krva
      },
      title: {
          display: true,
          text: 'Yearly'
      }
  }
};




   window.onload = function () {
    /*var ctx = document.getElementById('pie-chart').getContext('2d'); 
    window.myPie = new Chart(ctx, config);

    var ctx1 = document.getElementById('bar-chart').getContext('2d'); 
    window.myPie = new Chart(ctx1, config1); */

    var ctx2 = document.getElementById('bar1-chart').getContext('2d'); 
    window.myPie = new Chart(ctx2, config2);
 };
  </script>
{% endblock javascripts %}
